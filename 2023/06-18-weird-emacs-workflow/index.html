<!doctype html><html lang=zh-hans><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Lindsay"><meta name=description content="A static blog builded by hugo"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/hortensia.min.css><title>混乱中立与 Emacs</title></head><body><header><nav><a href=https://error.iorw.io/>[->+&lt;]</a>
<a href=https://error.iorw.io/about>About</a></nav><h1>混乱中立与 Emacs</h1><p>2023-06-18 06:46 +0000</p></header><main><figure><img src=https://cdn.pixabay.com/photo/2018/09/22/11/21/cat-3695040_1280.jpg alt=https://cdn.pixabay.com/photo/2018/09/22/11/21/cat-3695040_1280.jpg title=https://cdn.pixabay.com/photo/2018/09/22/11/21/cat-3695040_1280.jpg><figcaption>Meow! <a href=https://pixabay.com/photos/cat-paw-keyboard-playful-nasty-3695040>Lemonsandtea</a></figcaption></figure><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Why Emacs</h2><div id=outline-text-headline-1 class=outline-text-2><p>人类关于 Emacs、Vim 甚至是 VSCode 的争议从未休止，毕竟工具往往跟效率关系密切。对我而言，起初只是想试一试传闻中的 Emacs，看它到底有几分威力，在折腾过如<a href=https://github.com/redguardtoo/emacs.d>陈斌</a>大佬、<a href=https://github.com/doomemacs/doomemacs>Doom Emacs</a> 等等配置之后，逐渐开始有点“上头”，开始将日常工作流都迁移到 Emacs 上去。</p><p>对我来说，Emacs 有这么几个有意思的点：</p><ol><li>几乎所有的 buffer、函数、变量等等都是共享的，这让 hack 变得轻松</li><li>Emacs Lisp 有着很不错的表达能力，配合各种文本函数，很轻易地可以写出自己想要的功能</li><li>为了让你能更舒服的 hacking，甚至提供了如 <code>advice-add</code> 这样的 hijack 功能</li></ol><p>在我看来，Emacs 几乎就是为了让你折腾它而诞生的，打开 Emacs 总会不自觉地开启 <code>.emacs.d</code> 文件夹（笑），毕竟，当你用的不爽的时候，Emacs 真的允许你去修改。</p><p>当然，过度的灵活性也是 Emacs 的最大缺点－它违背了 UNIX 哲学：</p><blockquote><p>Make each program do one thing well. To do a new job, build afresh rather than complicate old programs by adding new "features".</p></blockquote><p>Emacs 作为文本编辑器是不够“纯粹”的，但我个人认为，模块化设计跟效率有着天然的冲突，选择 Emacs 就需要接收模块化不够的问题。就像大家偏好使用 IDE 一样，效率的来源往往就是多个小模块的拼合。</p></div></div><div id=outline-container-headline-2 class=outline-2><h2 id=headline-2>help-with-tutorial</h2><div id=outline-text-headline-2 class=outline-text-2><p>实际上 Emacs 你只需要掌握 <code>M-x</code> 这么一个快捷键就可以了（认真脸），几乎所有的快捷键都是在执行某个 <code>(interactive)</code> 命令。比如 <code>C-n</code> 就是 <code>next-line</code> ，~C-s~ 就是 <code>isearch-forward</code> ，如此。</p><p>我自己对 Vim 实际上不是很熟，连 <code>ciw</code> 这种这么好用的命令我都是学 Emacs 的时候发现的，因此选择了走一遍 <code>help-with-tutorial</code> ；如果你比较熟悉 Vim 的话可以直接使用 Doom Emacs 配置来快速入门。</p><p>当然，还有必不可少的 Emacs Lisp，这个语言可能对习惯类 C 语言的人来说会很不适应，我感觉是跟函数式类的语言更为接近（虽然多数时候都是按过程式的思维在写 hhhh）。比如：</p><ol><li>没有 <code>return</code> 这样的东东，函数的返回值就是最后 eval 的表达式的值</li><li>最基础的数组和 dict 之类的数据结构表达偏向函数式（例如 <code>car/cdr</code> 这样的函数）</li><li>括号太多（雾）</li><li>Many, many more</li></ol><p>我的做法是照葫芦画瓢，因为我自身学过一定的 Haskell 这类函数式语言，上手起来没有太多问题。如果觉得 hack 起来有点困难的话，可以参考 <a href=https://www.gnu.org/software/emacs/manual/html_node/elisp/index.html>Emacs Lisp 手册</a>来学习一下，或者别忘了还有 ChatGPT 可以利用。</p><p>P.S. 可能 Emacs 的 Common Lisp 扩展会让敲代码的体验好一些，无责任推荐（。</p></div></div><div id=outline-container-headline-3 class=outline-2><h2 id=headline-3>Prelude -> Postlude</h2><div id=outline-text-headline-3 class=outline-text-2><p>在尝试了很多配置之后，都感觉不是很“贴合”自己，尤其是大家似乎都很喜欢 Evil，但我自己更偏爱原生的键位，因为它泛用性比较强，在 <code>bash/zsh</code> 这类终端下默认就可以使用。因此敲定了 <a href=https://github.com/hartlottery/postlude>Prelude</a> 作为框架，在此基础上修改。</p><p>我自己的一些“所谓的”哲学理念（可能有点 bullsht）：</p><div id=outline-container-headline-4 class=outline-3><h3 id=headline-4>Modalka</h3><div id=outline-text-headline-4 class=outline-text-3><p>为了小拇指的健康，避免因 Control 键按太多而承受不住（雾），一个 modal editing 还是相当有必要的。所谓 modal editing，其实就是给“编辑”这个操作分模式，像 Vim 有 Normal 和 Insert。</p><p>选择 <a href=https://github.com/mrkkrp/modalka>Modalka</a> 的原因也很简单，因为它侵入性没有像 Evil 或者 god-mode 那样强，留有了更多的自定义空间。基本仿照着作者本人的配置，映射的基本是 Emacs 的原生键位，但是将常用的 <code>x</code> 和 <code>c</code> 键映射为了像 god-mode 那样的 <code>C-x</code> 前缀调用。</p><p>因为我自己 LWin 键用的并不多，所以直接将它映射为 <code>&lt;menu></code> 键并用来切换 modalka-mode，同时映射 <code>&lt;insert></code> 作为 fallback 按键，这样就能通过左手手掌按压来快速切换了。</p><p>P.S. 不过其实发现自己好像 modal 模式用的不是很频繁，Control 键按的依然“欢快”。可能确实习惯了统一快捷键的方式（？），不过为了小拇指，还是多切切习惯习惯好了。</p></div></div><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>Workspace</h3><div id=outline-text-headline-5 class=outline-text-3><p>工作区则相当接近 i3 这样的配置，不过因为主力系统是 Windows（不要问为什么，我也很想换，但是万恶阿里郎），因此没办法利用 Win 键切换，所以还是用的快件键切换。</p><p>使用了 Emacs 默认的 <code>tab-bar-mode</code> 来管理工作区，通过 <code>C-m 1</code> 这样的快捷键切换。而窗口则使用 <code>winum</code> 插件配合 <code>M-1</code> 这样的快捷键快速切换。</p><p>这么选择主要是感觉日常中切换工作区的频率，相对与切换窗口来说要少一点（虽说如此，我还是很想像 i3 那样的全都要）。</p></div></div><div id=outline-container-headline-6 class=outline-3><h3 id=headline-6>Region</h3><div id=outline-text-headline-6 class=outline-text-3><p>日常改代码的时候，最重要的其实就是 region 的操控，如 Vim 经常被使用的 <code>cw</code> 命令。因此选定了使用 <a href=https://github.com/magnars/expand-region.el>expand-region.el</a> 来快速选择区域，这部分借鉴了 <a href=https://github.com/meow-edit/meow>Meow</a> 的设计哲学，先选定区域，再决定动作。当然也从 Meow 那“抄”来了 <code>meow-inner-of-thing</code> 作为备选。</p><blockquote><p>Vim 的逻辑是，我想进行一个替换的操作，作用在一个单词上；</p><p>Meow 的逻辑则是，我选定了一个单词，对它进行替换的操作；</p><p>这两种逻辑没有对错，只有针对自己而言是否习惯，我就更偏向于 Meow 的逻辑。</p></blockquote><p>当然也缝合了 <a href=https://github.com/oantolin/embark>Embark</a> 来进行操作，但是实际上目前用的并不多，只是搜索符号的时候代替 Vim 的 <code>*/#</code> 这样的命令。在考虑是否要咔嚓掉 hhhh。</p></div></div><div id=outline-container-headline-7 class=outline-3><h3 id=headline-7>Jump</h3><div id=outline-text-headline-7 class=outline-text-3><p>大家好像都很喜欢用 <a href=https://github.com/abo-abo/avy>avy</a> 来跳转，经过一些小代码浏览的经验，目前我习惯的跳转方式有：</p><ul><li><code>C-;</code> 跳转到同一行（或者上下两行）的 word 上</li><li><code>C-'</code> 任意单词跳转</li><li><code>C-u X C-n/p</code> 配合相对行号快速跳转（其实目前这个用的更多，可能是目前对“行”的操作更多）</li><li><code>C-j d/r</code> 跳转 + 转到定义或引用，来自 <a href=https://github.com/MaskRay/Config>MaskRay</a> 大佬的配置</li></ul><p>除此之外也配置了很多其他的跳转方式，但是感觉都不怎么用的样子，主要是我目前还没有完全想好真正高效的定位方式，是 avy 这样更快，亦或是 Emacs 本身的操作就足够了，还是“组合拳”更为适应？</p><p>现在而言，我尽量遵循 <strong>Jump more, move less</strong> 的原则，尽量地使用跳转代替 <code>C-f</code> 等操作，当然在正常编辑中一些小错误的修正还是离不开 <code>C-f</code> 等。</p></div></div><div id=outline-container-headline-8 class=outline-3><h3 id=headline-8><span class=todo>TODO</span>
Next</h3><div id=outline-text-headline-8 class=outline-text-3><p>目前比较纠结要不要把 Meow 替换掉 Modalka，因为它的设计思想确实比较对我，但是又感觉实际上我只是喜欢它的选择模式，有了 <code>expand-region.el</code> 之后似乎也不那么必需了。我也把 Vim 的 <code>c</code> 键挪到了 Modalka 上，这样操作区域就更简单了。</p><p>还有需要酌定的就是所谓的 Ergo，即人体工程学，之前尝试了一下 <a href=https://github.com/jyp/boon>Boon</a> 发现好像没有必要为了省一点的手指挪动距离而放弃养成的习惯。</p><p>P.S. 走了一遍 Boon 的 Tutor 才明白，原来手指尽量不移动 + 左右按键分配均衡，就叫做人体工程学键位了。。好吧，我还像试试 Dvorak/Colemark/Workman 的说。</p><p>另外 IDE 常用的向前向后跳转还暂时没有去弄，因为像 <code>better-jumper</code> 这样的插件都需要自己手动 mark 跳跃点才行，想想还是有一定工作量的。依然还在磨合期（。</p></div></div></div></div><div id=outline-container-headline-9 class=outline-2><h2 id=headline-9>Devil</h2><div id=outline-text-headline-9 class=outline-text-2><p>来自 <a href=http://web.archive.org/web/20180602132306/https://plus.google.com/+LinusTorvalds/posts/iySKQGtkmtb>Linus Torvalds</a>：</p><blockquote><p>So for the other three people out there using "uEmacs/PK" (not to be confused with real emacs, which is the tool of the devil), you can now get a shiny new version of the same old cruddy editor, but now it actually edits UTF8.</p></blockquote><p>我尝试编译了一份 <a href=https://github.com/torvalds/uemacs>torvalds/uemacs</a> 玩玩，发现它真的很纯粹（纯粹到按键绑定全都是硬编码在 C 文件里的），而且贯彻着上述“只做一件事”的 UNIX 哲学。也难怪 Linus 会如此评价 Emacs（。</p></div></div><div id=outline-container-headline-10 class=outline-2><h2 id=headline-10>混乱中立</h2><div id=outline-text-headline-10 class=outline-text-2><p>配置久了之后就有一点感受是，当能完全自定义自己的 workflow 时，我发现选择突然太多了，自己似乎无法定夺到底哪种才是更好的，导致自己的配置存在各种“混乱”，很多功能相互重叠，甚至是用不上但感觉又能提升效率。</p><p>也就是有了一点所谓的 Premature Optimization 的感觉，明明应该是提升效率的，可是最后却被束缚了。思来想去还是觉得，方法是拿来解决问题的，还是回归我遇到的问题本身，再进行客制化吧。</p><p>可能是 Emacs 天然独有的混乱中立，它可以是为你提升效率的善良天使，也可以是给你捣乱让你反而被束缚住的邪恶魔鬼。</p><p>给自己的谨记： <strong>工具始终是拿来解决问题，而非折磨自己的</strong> 。</p><p><em>May the Emacs be with you.</em></p></div></div></main><footer>&copy;2023 &#183;
<a href=https://error.iorw.io>Byte</a> &#183;
<a href=https://github.com/hartlottery target=_blank rel=noopener>M-x</a></footer></body></html>